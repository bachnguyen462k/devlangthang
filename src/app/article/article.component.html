<div
  id="kt_content_container"
  class="d-flex flex-column-fluid align-items-stretch container-xxl"
>
  <div
    id="kt_aside"
    class="aside"
  >
    <div
      class="hover-scroll-overlay-y my-5 my-lg-5 w-100 ps-4 ps-lg-0 pe-4 me-1"
      id="kt_aside_menu_wrapper"
      style="height: 805px"
    >
      <div
        class="menu menu-column menu-active-bg menu-hover-bg menu-title-gray-700 fs-5 menu-rounded w-100"
        id="#kt_aside_menu"
      >
        <div class="menu-item">
          <div class="menu-content pb-2">
            <span class="menu-section text-muted text-uppercase fs-7 fw-bolder"
              >Public</span
            >
          </div>
        </div>
        <div class="menu-item">
          <a href="https://devs.keenthemes.com" class="menu-link"
            ><span class="menu-title">All Questions</span
            ><span class="menu-badge">3,022</span></a
          >
        </div>
        <div class="menu-item">
          <a href="https://devs.keenthemes.com/popular" class="menu-link"
            ><span class="menu-title">Popular</span></a
          >
        </div>
        <div class="menu-item">
          <a href="https://devs.keenthemes.com/tags" class="menu-link"
            ><span class="menu-title">Tags</span></a
          >
        </div>
        <div class="menu-item pt-5">
          <div class="menu-content pb-2">
            <span class="menu-section text-muted text-uppercase fs-7 fw-bolder"
              >Categories</span
            >
          </div>
        </div>
        <div class="menu-item">
          <a
            href="https://devs.keenthemes.com/categories/suggestions"
            class="menu-link"
            ><span class="menu-title">Suggestions</span
            ><span class="menu-badge">89</span></a
          >
        </div>
        <div class="menu-item">
          <a
            href="https://devs.keenthemes.com/categories/pre-sale-questions"
            class="menu-link active"
            ><span class="menu-title">Pre-sale Questions</span
            ><span class="menu-badge">126</span></a
          >
        </div>
        <div class="menu-item">
          <a
            href="https://devs.keenthemes.com/categories/metronic"
            class="menu-link"
            ><span class="menu-title">Metronic</span
            ><span class="menu-badge">2,513</span></a
          >
        </div>
        <div class="menu-item">
          <a
            href="https://devs.keenthemes.com/categories/getbootstrap"
            class="menu-link"
            ><span class="menu-title">Getbootstrap</span
            ><span class="menu-badge">59</span></a
          >
        </div>
        <div class="menu-item">
          <a
            href="https://devs.keenthemes.com/categories/market"
            class="menu-link"
            ><span class="menu-title">KeenThemes Market</span
            ><span class="menu-badge">60</span></a
          >
        </div>
      </div>
    </div>
  </div>
  <div
    class="wrapper d-flex flex-column flex-row-fluid mt-5 mt-lg-12"
    id="kt_wrapper"
    style="min-height: 790px"
  >
    <div class="content flex-column-fluid lh-lg" id="kt_content">
      <div class="post" id="kt_post">
        <div class="mb-7">
          <div class="d-flex align-items-center mb-7">
            <h1
              class="fs-2x fw-bolder text-gray-900 mb-0 me-1"
              data-question-id="3363"
            >
              {{ article.title }}
            </h1>
            <div
              class="d-flex align-items-center flex-grow-1 lh-1 flex-shrink-0"
            >
              <div class="me-2 flex-shrink-0">
                <span
                  class="ms-1"
                  data-bs-toggle="tooltip"
                  title=""
                  data-bs-original-title="Unresolved"
                  aria-label="Unresolved"
                  ><span class="svg-icon svg-icon-warning svg-icon-1"
                    ><svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <rect
                        opacity="0.3"
                        x="2"
                        y="2"
                        width="20"
                        height="20"
                        rx="10"
                        fill="black"
                      ></rect>
                      <rect
                        x="11"
                        y="14"
                        width="7"
                        height="2"
                        rx="1"
                        transform="rotate(-90 11 14)"
                        fill="black"
                      ></rect>
                      <rect
                        x="11"
                        y="17"
                        width="2"
                        height="2"
                        rx="1"
                        transform="rotate(-90 11 17)"
                        fill="black"
                      ></rect></svg></span
                ></span>
              </div>
            </div>
          </div>
          <div
            class="fs-5 fw-normal text-gray-800 mb-7 overflow-hidden"
            [innerHTML]="article.body"
          ></div>
          <div class="d-flex flex-stack flex-wrap">
            <app-article-meta [article]="article"></app-article-meta>
            <div class="d-flex align-items-center py-1">
              <!-- chỉnh sửa bài viết -->
              <div [hidden]="!canModify">
                <a
                  [routerLink]="['/editor', article.slug]"
                  class="btn btn-sm btn-flex btn-color-gray-500 btn-outline btn-outline-dashed btn-outline-default h-30px px-4 me-2"
                >
                  Chỉnh sửa
                </a>
                <a
                  [ngClass]="{ disabled: isDeleting }"
                  (click)="deleteArticle()"
                  class="btn btn-sm btn-flex btn-color-gray-500 btn-outline btn-outline-dashed btn-outline-default h-30px px-4 me-2"
                >
                  Xóa
                </a>
              </div>

              <div [hidden]="canModify">
                <app-follow-button
                  [profile]="article.author"
                  (toggle)="onToggleFollowing($event)"
                >
                </app-follow-button>

                <app-favorite-button
                  [article]="article"
                  (toggle)="onToggleFavorite($event)"
                >
                  {{ article.favorited ? "Unfavorite" : "Favorite" }} Article
                  <span class="counter">({{ article.favoritesCount }})</span>
                </app-favorite-button>
              </div>

              <!-- danh sách tags bài viết -->
              <div *ngFor="let tag of article.tagList; trackBy: trackByFn">
                <a
                  href="https://devs.keenthemes.com/tags/react"
                  class="btn btn-flex btn-sm btn-color-gray-500 btn-bg-light btn-active-primary px-4 me-2 h-30px"
                >
                  {{ tag }}
                </a>
              </div>

              <a
                class="btn btn-sm btn-icon btn-color-gray-500 btn-bg-light btn-active-primary h-30px w-30px me-2"
                data-bs-toggle="modal"
                data-bs-target="#page_modal_account_login"
                ><span
                  title=""
                  data-bs-toggle="tooltip"
                  data-bs-dismiss="click"
                  data-bs-original-title="Login first to save"
                  aria-label="Login first to save"
                  ><span class="svg-icon svg-icon-3"
                    ><svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path
                        d="M16.0077 19.2901L12.9293 17.5311C12.3487 17.1993 11.6407 17.1796 11.0426 17.4787L6.89443 19.5528C5.56462 20.2177 4 19.2507 4 17.7639V5C4 3.89543 4.89543 3 6 3H17C18.1046 3 19 3.89543 19 5V17.5536C19 19.0893 17.341 20.052 16.0077 19.2901Z"
                        fill="black"
                      ></path></svg></span></span
              ></a>
              <a
                class="btn btn-sm btn-icon btn-color-gray-500 btn-bg-light btn-active-primary h-30px w-30px me-2"
                data-bs-toggle="modal"
                data-bs-target="#page_modal_account_login"
                ><span
                  title=""
                  data-bs-toggle="tooltip"
                  data-bs-dismiss="click"
                  data-bs-original-title="Login first to upvote"
                  aria-label="Login first to upvote"
                  ><span class="svg-icon svg-icon-6 m-0"
                    ><svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path
                        opacity="0.5"
                        d="M13 9.59998V21C13 21.6 12.6 22 12 22C11.4 22 11 21.6 11 21V9.59998H13Z"
                        fill="black"
                      ></path>
                      <path
                        d="M5.7071 7.89291C5.07714 8.52288 5.52331 9.60002 6.41421 9.60002H17.5858C18.4767 9.60002 18.9229 8.52288 18.2929 7.89291L12.7 2.3C12.3 1.9 11.7 1.9 11.3 2.3L5.7071 7.89291Z"
                        fill="black"
                      ></path></svg></span></span
              ></a>
            </div>
          </div>
        </div>
        <form
          id="kt_devs_reply_form"
          class="form mb-10 fv-plugins-bootstrap fv-plugins-framework"
          (ngSubmit)="addComment()"
          novalidate="novalidate"
        >
          <input
            type="hidden"
            name="_token"
            value="T9egyNjUfYw8XcHnxMqEudFNlSv1xzmKMizb6Snj"
          /><input type="hidden" name="question_id" value="3363" />
          <div class="form-group mb-2 fv-plugins-icon-container">
            <textarea
              name="content"
              class="form-control"
              rows="5"
              placeholder="Viết bình luận.."
              [formControl]="commentControl"
            ></textarea>
            <div class="fv-plugins-message-container"></div>
          </div>
          <div class="form-group fv-plugins-icon-container">
            <div id="question_reply_captcha_container">
              <input type="hidden" name="___g-recaptcha-token___" /><input
                type="hidden"
                name="___g-recaptcha-token___"
              /><input type="hidden" name="___g-recaptcha-token___" /><input
                type="hidden"
                name="___g-recaptcha-token___"
              /><input type="hidden" name="___g-recaptcha-token___" /><input
                type="hidden"
                name="___g-recaptcha-token___"
              />
            </div>
            <div class="fv-plugins-message-container"></div>
            <div class="fv-plugins-message-container"></div>
            <div class="fv-plugins-message-container"></div>
            <div class="fv-plugins-message-container"></div>
          </div>
          <div
            class="d-flex align-items-center justify-content-between py-2 mb-0"
          >
            <div
              [routerLink]="['/profile', currentUser.username]"
              class="text-primary fs-base fw-bold cursor-pointer"
            >
              {{ currentUser.username }}
            </div>
            <!--  đăng nhập để bình luận -->
            <div class="d-flex ms-2" *appShowAuthed="true">
              <label
                class="form-group form-check form-switch form-check-custom form-check-solid me-6"
                ><input type="hidden" name="public" value="1" /><input
                  class="form-check-input"
                  type="checkbox"
                  name="public"
                  value="0"
                /><span class="form-check-label fs-7 fw-bolder text-gray-800">
                  Với tác giả
                </span></label
              >
              <button
                type="reset"
                class="btn btn-light-primary font-weight-bolder me-3 d-none"
                data-kt-action="cancel"
              >
                Hủy
              </button>
              <button class="btn btn-primary" type="submit">Bình luận</button>
            </div>

            <!-- hiện đăng nhập -->
            <div *appShowAuthed="false">
              <a [routerLink]="['/login']">Đăng nhập</a> hoặc
              <a [routerLink]="['/register']">đăng ký</a> để bình luận bài viết.
            </div>
          </div>
          <input type="hidden" />
        </form>

        <a id="answers" data-kt-scroll-offset="{default: 100, lg: 125}"></a>
        <h2 class="fw-bolder text-gray-900 mb-10">
          Bài viết này có {{ comments.length }} bình luận.
        </h2>
        <app-article-comment
          *ngFor="let comment of comments; trackBy: trackByFn"
          [comment]="comment"
          (deleteComment)="onDeleteComment(comment)"
        >
        </app-article-comment>
      </div>
    </div>
  </div>
</div>
